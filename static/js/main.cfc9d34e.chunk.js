(this["webpackJsonpreact-blog"]=this["webpackJsonpreact-blog"]||[]).push([[0],{38:function(t,n,e){"use strict";e.r(n);var r=e(1),c=e(0),i=e.n(c),a=e(21),o=e.n(a),u=e(4),s=e(2),j=e(3),b=e(17),d=e.n(b),l=e(22),f="token",O=function(t){localStorage.setItem(f,t)},h=function(){return localStorage.getItem(f)},x="https://student-json-api.lidemy.me",p=function(){var t=h();return fetch("".concat(x,"/me"),{headers:{authorization:"Bearer ".concat(t)}}).then((function(t){return t.json()}))},v=Object(c.createContext)(null),g=e(5);function m(){var t=Object(s.a)(["\n  text-align: center;\n  margin-top: 5rem;\n"]);return m=function(){return t},t}function S(){var t=Object(s.a)(["\n  color: red;\n"]);return S=function(){return t},t}var y=j.a.div(S()),w=j.a.form(m());function k(){var t=Object(c.useContext)(v).setUser,n=Object(c.useState)(""),e=Object(u.a)(n,2),i=e[0],a=e[1],o=Object(c.useState)(""),s=Object(u.a)(o,2),j=s[0],b=s[1],d=Object(c.useState)(""),l=Object(u.a)(d,2),f=l[0],h=l[1],m=Object(g.f)();return Object(r.jsxs)(w,{onSubmit:function(n){n.preventDefault(),h(null),function(t,n){return fetch("".concat(x,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:t,password:n})}).then((function(t){return t.json()}))}(i,j).then((function(n){if(0===n.ok)return h(n.message);O(n.token),p().then((function(n){if(1!==n.ok)return O(null),h(n.toString());t(n.data),m.push("/")}))}))},children:[Object(r.jsxs)("div",{children:["username:"," ",Object(r.jsx)("input",{value:i,onChange:function(t){return a(t.target.value)}})]}),Object(r.jsxs)("div",{children:["password:"," ",Object(r.jsx)("input",{value:j,onChange:function(t){return b(t.target.value)},type:"password"})]}),Object(r.jsx)("button",{children:"\u767b\u5165"}),f&&Object(r.jsx)(y,{children:f})]})}var C=e(9);function L(){var t=Object(s.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return L=function(){return t},t}function _(){var t=Object(s.a)(["\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n"]);return _=function(){return t},t}function z(){var t=Object(s.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n"]);return z=function(){return t},t}function $(){var t=Object(s.a)(["\n  width: 80%;\n  margin: 0 auto;\n"]);return $=function(){return t},t}var A=j.a.div($()),D=j.a.div(z()),E=Object(j.a)(C.b)(_()),I=j.a.div(L());function J(t){var n=t.post;return Object(r.jsxs)(D,{children:[Object(r.jsx)(E,{to:"/posts/".concat(n.id),children:n.title}),Object(r.jsx)(I,{children:new Date(n.createdAt).toLocaleString()})]})}function P(){var t=Object(c.useState)([]),n=Object(u.a)(t,2),e=n[0],i=n[1];return Object(c.useEffect)((function(){fetch("".concat(x,"/posts?_sort=createdAt&_order=desc")).then((function(t){return t.json()})).then((function(t){return i(t)}))}),[]),Object(r.jsx)(A,{children:e.map((function(t){return Object(r.jsx)(J,{post:t},t.id)}))})}function U(){var t=Object(s.a)(["\n  display: flex;\n  align-items: center;\n\n  "," {\n    margin-left: 64px;\n  }\n"]);return U=function(){return t},t}function B(){var t=Object(s.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  box-sizing: border-box;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n  ","\n"]);return B=function(){return t},t}function N(){var t=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  height: 64px;\n"]);return N=function(){return t},t}function T(){var t=Object(s.a)(["\n  font-size: 32px;\n  font-weight: bold;\n"]);return T=function(){return t},t}function M(){var t=Object(s.a)(["\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0px 32px;\n  box-sizing: border-box;\n  background-color: #fff;\n"]);return M=function(){return t},t}var R=j.a.div(M()),q=j.a.div(T()),F=j.a.div(N()),G=Object(j.a)(C.b)(B(),(function(t){return t.$active&&"\n    background: rgba(0,0,0,0.1);\n  "})),H=j.a.div(U(),F);function K(){var t=Object(g.g)(),n=Object(c.useContext)(v),e=n.user,i=n.setUser,a=n.isLoading,o=Object(g.f)();return Object(r.jsxs)(R,{children:[Object(r.jsxs)(H,{children:[Object(r.jsx)(q,{children:"\u90e8\u843d\u683c"}),Object(r.jsxs)(F,{children:[Object(r.jsx)(G,{to:"/",$active:"/"===t.pathname,children:"\u9996\u9801"}),Object(r.jsx)(G,{to:"/about",$active:"/about"===t.pathname,children:"\u95dc\u65bc\u90e8\u843d\u683c"}),Object(r.jsx)(G,{to:"/postsList",$active:"/postsList"===t.pathname,children:"\u6587\u7ae0\u5217\u8868"}),e&&Object(r.jsx)(G,{$active:"/new-post"===t.pathname,to:"/new-post",children:"\u767c\u5e03\u6587\u7ae0"})]})]}),a?null:Object(r.jsxs)(F,{children:[!e&&Object(r.jsx)(G,{$active:"/login"===t.pathname,to:"/login",children:"\u767b\u5165"}),!e&&Object(r.jsx)(G,{$active:"/register"===t.pathname,to:"/register",children:"\u8a3b\u518a"}),e&&Object(r.jsx)(G,{onClick:function(){O(""),i(null),"/"!==t.pathname&&o.push("/")},children:"\u767b\u51fa"})]})]})}function Q(){var t=Object(s.a)(["\n  max-width: 600px;\n  width: 100%;\n  text-align: center;\n  padding: 10px;\n"]);return Q=function(){return t},t}function V(){var t=Object(s.a)(["\n  display: flex;\n  justify-content: center;\n  max-width: 600px;\n  width: 100%;\n  flex-direction: column;\n  align-items: center;\n  padding: 10px;\n"]);return V=function(){return t},t}function W(){var t=Object(s.a)([""]);return W=function(){return t},t}function X(){var t=Object(s.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return X=function(){return t},t}function Y(){var t=Object(s.a)(["\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n  margin-bottom: 10px;\n"]);return Y=function(){return t},t}function Z(){var t=Object(s.a)(["\n  border-bottom: px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return Z=function(){return t},t}function tt(){var t=Object(s.a)(["\n  width: 80%;\n  margin: 0 auto;\n"]);return tt=function(){return t},t}var nt=j.a.div(tt()),et=j.a.div(Z()),rt=j.a.div(Y()),ct=j.a.div(X()),it=j.a.div(W()),at=j.a.div(V()),ot=j.a.div(Q());function ut(){var t=Object(g.h)().id,n=Object(c.useState)([]),e=Object(u.a)(n,2),i=e[0],a=e[1];return Object(c.useEffect)((function(){(function(t){return fetch("".concat(x,"/posts/").concat(t)).then((function(t){return t.json()}))})(t).then((function(t){return a(t)}))}),[t]),Object(r.jsx)(nt,{children:i.id?Object(r.jsxs)(et,{children:[Object(r.jsxs)(at,{children:[Object(r.jsx)(rt,{children:i.title}),Object(r.jsx)(ct,{children:new Date(i.createdAt).toLocaleString()})]}),Object(r.jsx)(ot,{children:Object(r.jsx)(it,{children:i.body})})]}):null})}function st(){var t=Object(s.a)(["\n  text-align: center;\n  margin-top: 5rem;\n"]);return st=function(){return t},t}function jt(){var t=Object(s.a)(["\n  color: red;\n"]);return jt=function(){return t},t}var bt=j.a.div(jt()),dt=j.a.form(st());function lt(){var t=Object(c.useState)(""),n=Object(u.a)(t,2),e=n[0],i=n[1],a=Object(c.useState)(""),o=Object(u.a)(a,2),s=o[0],j=o[1],b=Object(c.useState)(""),d=Object(u.a)(b,2),l=d[0],f=d[1],O=Object(g.f)();return Object(r.jsxs)(dt,{onSubmit:function(t){t.preventDefault(),function(t,n){var e=h();return fetch("".concat(x,"/posts"),{method:"POST",headers:{authorization:"Bearer ".concat(e),"content-type":"application/json"},body:JSON.stringify({title:t,body:n})}).then((function(t){return t.json()}))}(e,s).then((function(t){0===t.ok&&f(t.message),i(""),j(""),O.push("/")}))},children:[Object(r.jsxs)("div",{children:["title:",Object(r.jsx)("input",{value:e,onChange:function(t){return i(t.target.value)}})]}),Object(r.jsxs)("div",{children:["body:",Object(r.jsx)("input",{value:s,onChange:function(t){return j(t.target.value)}})]}),Object(r.jsx)("button",{children:"\u767c\u5e03"}),l&&Object(r.jsx)(bt,{children:l})]})}function ft(){var t=Object(s.a)(["\n  max-width: 600px;\n  line-height: 1.5;\n"]);return ft=function(){return t},t}function Ot(){var t=Object(s.a)([""]);return Ot=function(){return t},t}function ht(){var t=Object(s.a)(["\n  width: 80%;\n  display: flex;\n  margin: 0 auto;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return ht=function(){return t},t}var xt=j.a.div(ht()),pt=j.a.h1(Ot()),vt=j.a.h3(ft());function gt(){return Object(r.jsxs)(xt,{children:[Object(r.jsx)(pt,{children:"\u95dc\u65bc\u90e8\u843d\u683c\u7684\u4e8c\u4e09\u4e8b"}),Object(r.jsx)(vt,{children:"\u9019\u662f Mentor program \u7a0b\u5f0f\u5c0e\u5e2b\u8a08\u756b\u7b2c4\u671f\u7b2c22\u9031\u7684\u4f5c\u696d \u9019\u9031\u6211\u5011\u7528 React \u5c07\u8ab2\u7a0b\u88e1\u505a\u5230\u4e00\u534a\u7684\u90e8\u843d\u683c\u529f\u80fd\u88dc\u5b8c\u3002"})]})}function mt(){var t=Object(s.a)([""]);return mt=function(){return t},t}function St(){var t=Object(s.a)(["\n  margin-top: 2rem;\n"]);return St=function(){return t},t}function yt(){var t=Object(s.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return yt=function(){return t},t}function wt(){var t=Object(s.a)(["\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n"]);return wt=function(){return t},t}function kt(){var t=Object(s.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n"]);return kt=function(){return t},t}function Ct(){var t=Object(s.a)(["\n  width: 80%;\n  margin: 0 auto;\n"]);return Ct=function(){return t},t}var Lt=j.a.div(Ct()),_t=j.a.div(kt()),zt=Object(j.a)(C.b)(wt()),$t=j.a.div(yt()),At=j.a.button(St()),Dt=j.a.h1(mt());function Et(t){var n=t.post;return Object(r.jsxs)(_t,{children:[Object(r.jsx)(zt,{to:"/posts/".concat(n.id),children:n.title}),Object(r.jsx)($t,{children:new Date(n.createdAt).toLocaleString()})]})}function It(){var t,n=Object(c.useState)([]),e=Object(u.a)(n,2),i=e[0],a=e[1],o=Object(c.useState)(""),s=Object(u.a)(o,2),j=s[0],b=s[1],f=Object(c.useState)("https://student-json-api.lidemy.me/posts?_page=1&_limit=5&_sort=createdAt&_order=desc"),O=Object(u.a)(f,2),h=O[0],p=O[1],v=Object(c.useState)([]),g=Object(u.a)(v,2),m=g[0],S=g[1];return Object(c.useEffect)((function(){var t;(t=h,fetch(t).then(function(){var t=Object(l.a)(d.a.mark((function t(n){var e,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.headers.get("link").replace(/\</gi,"").replace(/\>/gi,"").split(","),t.next=3,n.json();case 3:return r=t.sent,e=e.map((function(t){return t.replace(/ /,"").split(";")})),t.abrupt("return",{links:e,posts:r});case 6:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}())).then((function(t){S(t.links),a(t.posts)}))}),[h]),Object(c.useEffect)((function(){fetch("".concat(x,"/posts?_page=1&_limit=5&_sort=createdAt&_order=desc")).then((function(t){return t.headers.get("x-total-count")})).then((function(t){return b(t)}))}),[j]),t=4===m.length?Object(r.jsxs)("div",{children:[Object(r.jsx)(At,{onClick:function(){return p(m[0][0])},children:"\u7b2c\u4e00\u9801"}),Object(r.jsx)(At,{onClick:function(){return p(m[1][0])},children:"\u4e0a\u4e00\u9801"}),Object(r.jsx)(At,{onClick:function(){return p(m[2][0])},children:"\u4e0b\u4e00\u9801"}),Object(r.jsx)(At,{onClick:function(){return p(m[3][0])},children:"\u6700\u5f8c\u4e00\u9801"})]}):Object(r.jsxs)("div",{children:[Object(r.jsx)(At,{onClick:function(){return p(m[0][0])},children:"\u7b2c\u4e00\u9801"}),Object(r.jsx)(At,{onClick:function(){return p(m[1][0])},children:"\u4e0b\u4e00\u9801"}),Object(r.jsx)(At,{onClick:function(){return p(m[2][0])},children:"\u6700\u5f8c\u4e00\u9801"})]}),Object(r.jsxs)(Lt,{children:[Object(r.jsxs)(Dt,{children:["\u7e3d\u5171\u6709: ",j," \u7b46\u6587\u7ae0\u3002"]}),i.map((function(t){return Object(r.jsx)(Et,{post:t},t.id)})),t]})}function Jt(){var t=Object(s.a)(["\n  text-align: center;\n  margin-top: 5rem;\n"]);return Jt=function(){return t},t}function Pt(){var t=Object(s.a)(["\n  color: red;\n"]);return Pt=function(){return t},t}var Ut=j.a.div(Pt()),Bt=j.a.form(Jt());function Nt(){var t=Object(c.useContext)(v),n=t.setUser,e=t.setIsLoading,i=Object(c.useState)(""),a=Object(u.a)(i,2),o=a[0],s=a[1],j=Object(c.useState)(""),b=Object(u.a)(j,2),d=b[0],l=b[1],f=Object(c.useState)(""),h=Object(u.a)(f,2),m=h[0],S=h[1],y=Object(c.useState)(""),w=Object(u.a)(y,2),k=w[0],C=w[1],L=Object(g.f)();return Object(r.jsxs)(Bt,{onSubmit:function(t){t.preventDefault(),function(t,n,e){return fetch("".concat(x,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:t,username:n,password:e})}).then((function(t){return t.json()}))}(o,d,m).then((function(t){t.ok||C(t.message),O(t.token),p().then((function(t){t.ok&&(e(!1),n(t.data),L.push("/"))}))}))},children:[Object(r.jsxs)("div",{children:["nickname:"," ",Object(r.jsx)("input",{value:o,onChange:function(t){return s(t.target.value)}})]}),Object(r.jsxs)("div",{children:["username:"," ",Object(r.jsx)("input",{value:d,onChange:function(t){return l(t.target.value)}})]}),Object(r.jsxs)("div",{children:["password:"," ",Object(r.jsx)("input",{value:m,onChange:function(t){return S(t.target.value)},type:"password"})]}),Object(r.jsx)("button",{children:"\u767b\u5165"}),k&&Object(r.jsx)(Ut,{children:k})]})}function Tt(){var t=Object(s.a)(["\n  padding-top: 64px;\n"]);return Tt=function(){return t},t}var Mt=j.a.div(Tt());var Rt=function(){var t=Object(c.useState)(null),n=Object(u.a)(t,2),e=n[0],i=n[1],a=Object(c.useState)(!0),o=Object(u.a)(a,2),s=o[0],j=o[1];return Object(c.useEffect)((function(){h()?p().then((function(t){t.ok&&(j(!1),i(t.data))})):j(!1)}),[]),Object(r.jsx)(v.Provider,{value:{user:e,setUser:i,isLoading:s,setIsLoading:j},children:Object(r.jsx)(Mt,{children:Object(r.jsxs)(C.a,{children:[Object(r.jsx)(K,{}),Object(r.jsxs)(g.c,{children:[Object(r.jsx)(g.a,{exact:!0,path:"/",children:Object(r.jsx)(P,{})}),Object(r.jsx)(g.a,{path:"/login",children:Object(r.jsx)(k,{})}),Object(r.jsx)(g.a,{path:"/register",children:Object(r.jsx)(Nt,{})}),Object(r.jsx)(g.a,{path:"/about",children:Object(r.jsx)(gt,{})}),Object(r.jsx)(g.a,{path:"/postsList",children:Object(r.jsx)(It,{})}),Object(r.jsx)(g.a,{path:"/new-post",children:Object(r.jsx)(lt,{})}),Object(r.jsx)(g.a,{path:"/posts/:id",children:Object(r.jsx)(ut,{})})]})]})})})};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(Rt,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.cfc9d34e.chunk.js.map