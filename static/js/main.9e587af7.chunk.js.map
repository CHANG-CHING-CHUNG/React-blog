{"version":3,"sources":["utils.js","WebApi.js","contexts.js","pages/LoginPage/LoginPage.js","pages/HomePage/HomePage.js","components/Header/Header.js","redux/reducers/postReducer.js","pages/SinglePostPage/SinglePostPage.js","pages/AddPostPage/AddPostPage.js","pages/AboutPage/AboutPage.js","pages/PostListPage/PostListPage.js","pages/RegistrationPage/RegistrationPage.js","components/App/App.js","redux/store.js","index.js"],"names":["TOKEN_NAME","setAuthToken","token","localStorage","setItem","getAuthToken","getItem","BASE_URL","getPostsByLimit","URL","a","fetch","res","headers","json","posts","links","get","replace","split","map","link","getMe","authorization","then","AuthContext","createContext","ErrorMessage","styled","div","Form","form","LoginPage","setUser","useContext","useState","username","setUsername","password","setPassword","errorMessage","setErrorMessage","history","useHistory","onSubmit","e","preventDefault","method","body","JSON","stringify","login","data","ok","message","toString","push","value","onChange","target","type","Root","PostContainer","PostTitle","Link","PostDate","Post","post","to","id","title","Date","createdAt","toLocaleString","HomePage","setPosts","useEffect","HeaderContainer","Brand","NavbarList","Nav","props","$active","LeftContainer","Header","location","useLocation","user","isLoading","pathname","onClick","postReducer","createSlice","name","initialState","isLoadingPost","newPostResponse","reducers","setIsLoadingPost","state","action","payload","setPost","setNewPostResponse","actions","getPost","dispatch","getPostAPI","catch","err","console","log","newPost","addPost","PostBody","PostHeader","PostBodyWrapper","SinglePostPage","useParams","useDispatch","useSelector","store","removePost","AddPostPage","setTitle","setBody","cols","rows","Title","h1","About","h3","AboutPage","PaginationBtn","button","PostListPage","PaginationBtns","totalCount","setTotalCount","setLink","setLinks","count","length","RegistrationPage","setIsLoading","nickname","setNickname","registerUser","App","Provider","exact","path","children","configureStore","reducer","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9e587af7.chunk.js","sourcesContent":["const TOKEN_NAME = \"token\";\n\nexport const setAuthToken = (token) => {\n  localStorage.setItem(TOKEN_NAME, token);\n};\n\nexport const getAuthToken = () => {\n  return localStorage.getItem(TOKEN_NAME);\n};\n","import { getAuthToken } from \"./utils\";\nconst BASE_URL = \"https://student-json-api.lidemy.me\";\nexport const LINK_URL =\n  \"https://student-json-api.lidemy.me/posts?_page=1&_limit=5&_sort=createdAt&_order=desc\";\n\nexport const getPosts = () => {\n  return fetch(`${BASE_URL}/posts?_sort=createdAt&_order=desc`).then((res) =>\n    res.json()\n  );\n};\n\nexport const removePost = (id) => {\n  return fetch(`${BASE_URL}/posts/${id}`, {\n    method: \"DELETE\",\n  }).then((res) => res.json());\n};\n\nexport const getPostsByLimit = async (URL) => {\n  const res = await fetch(URL);\n  const { headers } = res;\n  const posts = await res.json();\n\n  let links = headers\n    .get(\"link\")\n    .replace(/\\</gi, \"\")\n    .replace(/\\>/gi, \"\")\n    .split(\",\");\n\n  links = links.map((link) => {\n    const newLink = link.replace(/http/, \"https\").replace(/ /, \"\").split(\";\");\n    return newLink;\n  });\n\n  return {\n    links,\n    posts,\n  };\n};\n\nexport const getTotalCountOfPosts = () => {\n  return fetch(\n    `${BASE_URL}/posts?_page=1&_limit=5&_sort=createdAt&_order=desc`\n  ).then((res) => res.headers.get(\"x-total-count\"));\n};\n\nexport const getPost = (id) => {\n  return fetch(`${BASE_URL}/posts/${id}`).then((res) => res.json());\n};\n\nexport const login = (username, password) => {\n  return fetch(`${BASE_URL}/login`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      username,\n      password,\n    }),\n  }).then((res) => res.json());\n};\n\nexport const getMe = () => {\n  const token = getAuthToken();\n  return fetch(`${BASE_URL}/me`, {\n    headers: {\n      authorization: `Bearer ${token}`,\n    },\n  }).then((res) => res.json());\n};\n\nexport const addPost = (title, body) => {\n  const token = getAuthToken();\n  return fetch(`${BASE_URL}/posts`, {\n    method: \"POST\",\n    headers: {\n      authorization: `Bearer ${token}`,\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      title,\n      body,\n    }),\n  }).then((res) => res.json());\n};\n\nexport const registerUser = (nickname, username, password) => {\n  return fetch(`${BASE_URL}/register`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      nickname,\n      username,\n      password,\n    }),\n  }).then((res) => res.json());\n};\n","import { createContext } from \"react\";\n\nexport const AuthContext = createContext(null);\n","import React, { useState, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { login, getMe } from \"../../WebApi\";\nimport { setAuthToken } from \"../../utils\";\nimport { AuthContext } from \"../../contexts\";\nimport { useHistory } from \"react-router-dom\";\n\nconst ErrorMessage = styled.div`\n  color: red;\n`;\n\nconst Form = styled.form`\n  text-align: center;\n  margin-top: 5rem;\n`;\n\nexport default function LoginPage() {\n  const { setUser } = useContext(AuthContext);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const history = useHistory();\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setErrorMessage(null);\n    login(username, password).then((data) => {\n      if (data.ok === 0) {\n        return setErrorMessage(data.message);\n      }\n      setAuthToken(data.token);\n      getMe().then((res) => {\n        if (res.ok !== 1) {\n          setAuthToken(null);\n          return setErrorMessage(res.toString());\n        }\n        setUser(res.data);\n        history.push(\"/\");\n      });\n    });\n  };\n  return (\n    <Form onSubmit={handleSubmit}>\n      <div>\n        username:{\" \"}\n        <input value={username} onChange={(e) => setUsername(e.target.value)} />\n      </div>\n      <div>\n        password:{\" \"}\n        <input\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          type=\"password\"\n        />\n      </div>\n      <button>登入</button>\n      {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n    </Form>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\n\nimport { Link } from \"react-router-dom\";\nimport { getPosts } from \"../../WebApi\";\n\nconst Root = styled.div`\n  width: 80%;\n  margin: 0 auto;\n`;\n\nconst PostContainer = styled.div`\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n`;\n\nconst PostTitle = styled(Link)`\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n`;\n\nconst PostDate = styled.div`\n  color: rgba(0, 0, 0, 0.8);\n`;\n\nfunction Post({ post }) {\n  return (\n    <PostContainer>\n      <PostTitle to={`/posts/${post.id}`}>{post.title}</PostTitle>\n      <PostDate>{new Date(post.createdAt).toLocaleString()}</PostDate>\n    </PostContainer>\n  );\n}\n\nPost.propTypes = {\n  post: PropTypes.object,\n};\n\nexport default function HomePage() {\n  const [posts, setPosts] = useState([]);\n\n  useEffect(() => {\n    getPosts().then((posts) => setPosts(posts));\n  }, []);\n\n  return (\n    <Root>\n      {posts.map((post) => (\n        <Post key={post.id} post={post} />\n      ))}\n    </Root>\n  );\n}\n","import React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { AuthContext } from \"../../contexts\";\nimport { setAuthToken } from \"../../utils\";\n\nimport { useHistory, Link, useLocation } from \"react-router-dom\";\nconst HeaderContainer = styled.div`\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0px 32px;\n  box-sizing: border-box;\n  background-color: #fff;\n`;\n\nconst Brand = styled.div`\n  font-size: 32px;\n  font-weight: bold;\n`;\n\nconst NavbarList = styled.div`\n  display: flex;\n  align-items: center;\n  height: 64px;\n`;\n\nconst Nav = styled(Link)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  box-sizing: border-box;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n  ${(props) =>\n    props.$active &&\n    `\n    background: rgba(0,0,0,0.1);\n  `}\n`;\n\nconst LeftContainer = styled.div`\n  display: flex;\n  align-items: center;\n\n  ${NavbarList} {\n    margin-left: 64px;\n  }\n`;\n\nexport default function Header() {\n  const location = useLocation();\n  const { user, setUser, isLoading } = useContext(AuthContext);\n  const history = useHistory();\n  const handleLogout = () => {\n    setAuthToken(\"\");\n    setUser(null);\n    if (location.pathname !== \"/\") {\n      history.push(\"/\");\n    }\n  };\n  return (\n    <HeaderContainer>\n      <LeftContainer>\n        <Brand>部落格</Brand>\n        <NavbarList>\n          <Nav to=\"/\" $active={location.pathname === \"/\"}>\n            首頁\n          </Nav>\n          <Nav to=\"/about\" $active={location.pathname === \"/about\"}>\n            關於部落格\n          </Nav>\n          <Nav to=\"/postsList\" $active={location.pathname === \"/postsList\"}>\n            文章列表\n          </Nav>\n          {user && (\n            <Nav $active={location.pathname === \"/new-post\"} to=\"/new-post\">\n              發布文章\n            </Nav>\n          )}\n        </NavbarList>\n      </LeftContainer>\n      {isLoading ? null : (\n        <NavbarList>\n          {!user && (\n            <Nav $active={location.pathname === \"/login\"} to=\"/login\">\n              登入\n            </Nav>\n          )}\n          {!user && (\n            <Nav $active={location.pathname === \"/register\"} to=\"/register\">\n              註冊\n            </Nav>\n          )}\n          {user && <Nav onClick={handleLogout}>登出</Nav>}\n        </NavbarList>\n      )}\n    </HeaderContainer>\n  );\n}\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { getPost as getPostAPI, addPost } from \"../../WebApi\";\n\nexport const postReducer = createSlice({\n  name: \"posts\",\n  initialState: {\n    isLoadingPost: false,\n    post: null,\n    newPostResponse: null,\n  },\n  reducers: {\n    setIsLoadingPost: (state, action) => {\n      state.isLoadingPost = action.payload;\n    },\n    setPost: (state, action) => {\n      state.post = action.payload;\n    },\n    setNewPostResponse: (state, action) => {\n      state.newPostResponse = action.payload;\n    },\n  },\n});\n\nexport const {\n  setIsLoadingPost,\n  setPost,\n  setNewPostResponse,\n} = postReducer.actions;\n\nexport const getPost = (id) => (dispatch) => {\n  dispatch(setIsLoadingPost(true));\n  getPostAPI(id)\n    .then((res) => {\n      dispatch(setPost(res));\n      dispatch(setIsLoadingPost(false));\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const newPost = (title, body) => (dispatch) => {\n  addPost(title, body).then((data) => {\n    dispatch(setNewPostResponse(data));\n  });\n};\n\nexport default postReducer.reducer;\n","import React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\n\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { removePost } from \"../../WebApi\";\nimport { getPost } from \"../../redux/reducers/postReducer\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nconst Root = styled.div`\n  width: 80%;\n  margin: 0 auto;\n`;\n\nconst PostContainer = styled.div`\n  border-bottom: px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst PostTitle = styled.div`\n  font-size: 30px;\n  color: #333;\n  text-decoration: none;\n  margin-bottom: 10px;\n  font-weight: bold;\n`;\n\nconst PostDate = styled.div`\n  color: rgba(0, 0, 0, 0.8);\n`;\n\nconst PostBody = styled.div`\n  white-space: pre-line;\n  line-height: 2;\n  text-align: left;\n`;\n\nSinglePostPage.propTypes = {\n  post: PropTypes.object,\n};\n\nconst PostHeader = styled.div`\n  display: flex;\n  justify-content: center;\n  max-width: 600px;\n  width: 100%;\n  flex-direction: column;\n  align-items: center;\n  padding: 10px;\n`;\n\nconst PostBodyWrapper = styled.div`\n  max-width: 600px;\n  width: 100%;\n  text-align: center;\n  padding: 10px;\n`;\n\nexport default function SinglePostPage() {\n  const history = useHistory();\n  let { id } = useParams();\n  const dispatch = useDispatch();\n  const isLoading = useSelector((store) => store.posts.isLoadingPost);\n  const post = useSelector((store) => store.posts.post);\n\n  useEffect(() => {\n    dispatch(getPost(id));\n  }, [id, dispatch]);\n\n  const handleRemovePost = () => {\n    removePost(id).then(() => {\n      history.push(\"/\");\n    });\n  };\n\n  return (\n    <Root>\n      {!isLoading && post && post.id ? (\n        <PostContainer>\n          <button onClick={handleRemovePost}>刪除</button>\n          <PostHeader>\n            <PostTitle>{post.title}</PostTitle>\n            <PostDate>{new Date(post.createdAt).toLocaleString()}</PostDate>\n          </PostHeader>\n          <PostBodyWrapper>\n            <PostBody>{post.body}</PostBody>\n          </PostBodyWrapper>\n        </PostContainer>\n      ) : null}\n    </Root>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useHistory } from \"react-router-dom\";\nimport { newPost, setNewPostResponse } from \"../../redux/reducers/postReducer\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nconst ErrorMessage = styled.div`\n  color: red;\n`;\n\nconst Form = styled.form`\n  text-align: center;\n  margin-top: 5rem;\n`;\n\nexport default function AddPostPage() {\n  const [title, setTitle] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const history = useHistory();\n\n  const dispatch = useDispatch();\n  const newPostResponse = useSelector((store) => store.posts.newPostResponse);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    dispatch(newPost(title, body));\n  };\n\n  useEffect(() => {\n    if (newPostResponse && newPostResponse.ok === 0) {\n      setErrorMessage(newPostResponse.message);\n    }\n    setTitle(\"\");\n    setBody(\"\");\n    if (newPostResponse && newPostResponse.id) {\n      history.push(\"/posts/\" + newPostResponse.id);\n    }\n    return () => {\n      dispatch(setNewPostResponse(null));\n    };\n  }, [newPostResponse, history, dispatch]);\n  return (\n    <Form onSubmit={handleSubmit}>\n      <div>\n        title:\n        <input value={title} onChange={(e) => setTitle(e.target.value)} />\n      </div>\n      <div>\n        body:\n        <textarea\n          cols=\"50\"\n          rows=\"20\"\n          value={body}\n          onChange={(e) => setBody(e.target.value)}\n        />\n      </div>\n      <button>發布</button>\n      {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n    </Form>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Root = styled.div`\n  width: 80%;\n  display: flex;\n  margin: 0 auto;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n`;\n\nconst Title = styled.h1``;\n\nconst About = styled.h3`\n  max-width: 600px;\n  line-height: 1.5;\n`;\n\nexport default function AboutPage() {\n  return (\n    <Root>\n      <Title>關於部落格的二三事</Title>\n      <About>\n        這是 Mentor program 程式導師計畫第4期第22週的作業 這週我們用 React\n        將課程裡做到一半的部落格功能補完。\n      </About>\n    </Root>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport PropTypes from \"prop-types\";\n\nimport { Link } from \"react-router-dom\";\nimport { getPostsByLimit, getTotalCountOfPosts, LINK_URL } from \"../../WebApi\";\n\nconst Root = styled.div`\n  width: 80%;\n  margin: 0 auto;\n`;\n\nconst PostContainer = styled.div`\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n`;\n\nconst PostTitle = styled(Link)`\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n`;\n\nconst PostDate = styled.div`\n  color: rgba(0, 0, 0, 0.8);\n`;\n\nconst PaginationBtn = styled.button`\n  margin-top: 2rem;\n`;\n\nconst Header = styled.h1``;\n\nfunction Post({ post }) {\n  return (\n    <PostContainer>\n      <PostTitle to={`/posts/${post.id}`}>{post.title}</PostTitle>\n      <PostDate>{new Date(post.createdAt).toLocaleString()}</PostDate>\n    </PostContainer>\n  );\n}\n\nPost.propTypes = {\n  post: PropTypes.object,\n};\n\nexport default function PostListPage() {\n  const [posts, setPosts] = useState([]);\n  const [totalCount, setTotalCount] = useState(\"\");\n  const [link, setLink] = useState(LINK_URL);\n  const [links, setLinks] = useState([]);\n  useEffect(() => {\n    getPostsByLimit(link).then((posts) => {\n      setLinks(posts.links);\n      setPosts(posts.posts);\n    });\n  }, [link]);\n\n  useEffect(() => {\n    getTotalCountOfPosts().then((count) => setTotalCount(count));\n  }, [totalCount]);\n  let PaginationBtns;\n  if (links.length === 4) {\n    PaginationBtns = (\n      <div>\n        <PaginationBtn onClick={() => setLink(links[0][0])}>\n          第一頁\n        </PaginationBtn>\n        <PaginationBtn onClick={() => setLink(links[1][0])}>\n          上一頁\n        </PaginationBtn>\n        <PaginationBtn onClick={() => setLink(links[2][0])}>\n          下一頁\n        </PaginationBtn>\n        <PaginationBtn onClick={() => setLink(links[3][0])}>\n          最後一頁\n        </PaginationBtn>\n      </div>\n    );\n  } else {\n    PaginationBtns = (\n      <div>\n        <PaginationBtn onClick={() => setLink(links[0][0])}>\n          第一頁\n        </PaginationBtn>\n        <PaginationBtn onClick={() => setLink(links[1][0])}>\n          下一頁\n        </PaginationBtn>\n        <PaginationBtn onClick={() => setLink(links[2][0])}>\n          最後一頁\n        </PaginationBtn>\n      </div>\n    );\n  }\n  return (\n    <Root>\n      <Header>總共有: {totalCount} 筆文章。</Header>\n      {posts.map((post) => (\n        <Post key={post.id} post={post} />\n      ))}\n      {PaginationBtns}\n    </Root>\n  );\n}\n","import React, { useState, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { registerUser, getMe } from \"../../WebApi\";\nimport { setAuthToken } from \"../../utils\";\nimport { AuthContext } from \"../../contexts\";\nimport { useHistory } from \"react-router-dom\";\n\nconst ErrorMessage = styled.div`\n  color: red;\n`;\n\nconst Form = styled.form`\n  text-align: center;\n  margin-top: 5rem;\n`;\n\nexport default function RegistrationPage() {\n  const { setUser, setIsLoading } = useContext(AuthContext);\n  const [nickname, setNickname] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const history = useHistory();\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    registerUser(nickname, username, password).then((res) => {\n      if (!res.ok) {\n        setErrorMessage(res.message);\n      }\n      setAuthToken(res.token);\n      getMe().then((res) => {\n        if (res.ok) {\n          setIsLoading(false);\n          setUser(res.data);\n          history.push(\"/\");\n        }\n      });\n    });\n  };\n  return (\n    <Form onSubmit={handleSubmit}>\n      <div>\n        nickname:{\" \"}\n        <input value={nickname} onChange={(e) => setNickname(e.target.value)} />\n      </div>\n      <div>\n        username:{\" \"}\n        <input value={username} onChange={(e) => setUsername(e.target.value)} />\n      </div>\n      <div>\n        password:{\" \"}\n        <input\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          type=\"password\"\n        />\n      </div>\n      <button>登入</button>\n      {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n    </Form>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport LoginPage from \"../../pages/LoginPage\";\nimport HomePage from \"../../pages/HomePage\";\nimport Header from \"../Header/\";\nimport SinglePostPage from \"../../pages/SinglePostPage\";\nimport { AuthContext } from \"../../contexts\";\nimport { getMe } from \"../../WebApi\";\nimport { getAuthToken } from \"../../utils\";\n\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\nimport AddPostPage from \"../../pages/AddPostPage/AddPostPage\";\nimport AboutPage from \"../../pages/AboutPage\";\nimport PostListPage from \"../../pages/PostListPage\";\nimport RegistrationPage from \"../../pages/RegistrationPage/RegistrationPage\";\n\nconst Root = styled.div`\n  padding-top: 64px;\n`;\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    if (getAuthToken()) {\n      getMe().then((res) => {\n        if (res.ok) {\n          setIsLoading(false);\n          setUser(res.data);\n        } else {\n          setIsLoading(false);\n        }\n      });\n    } else {\n      setIsLoading(false);\n    }\n  }, []);\n  return (\n    <AuthContext.Provider value={{ user, setUser, isLoading, setIsLoading }}>\n      <Root>\n        <Router>\n          <Header />\n          <Switch>\n            <Route exact path=\"/\">\n              <HomePage />\n            </Route>\n            <Route path=\"/login\">\n              <LoginPage />\n            </Route>\n            <Route path=\"/register\">\n              <RegistrationPage />\n            </Route>\n            <Route path=\"/about\">\n              <AboutPage />\n            </Route>\n            <Route path=\"/postsList\">\n              <PostListPage />\n            </Route>\n            <Route path=\"/new-post\">\n              <AddPostPage />\n            </Route>\n            <Route path=\"/posts/:id\" children={<SinglePostPage />} />\n          </Switch>\n        </Router>\n      </Root>\n    </AuthContext.Provider>\n  );\n}\n\nexport default App;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport postReducer from \"./reducers/postReducer\";\n\nexport default configureStore({\n  reducer: {\n    posts: postReducer,\n  },\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App/\";\nimport { Provider } from \"react-redux\";\nimport store from \"./redux/store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}